<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ledger.</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0B0B0C;
      --bubble:#A62B2B;
      --bubbleText:#fff2f2;
      --input:#2a292a;
      --hint:#8d8d8f;
      --ghost:#b2b2b6;
      --text:#EDEDEF;
      --arrow:#bdbdc2;
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font:16px/1.5 Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    .wrap{ height:100%; position:relative; overflow:hidden; }
    .brand{
      position:fixed; inset:18px auto auto 18px; display:flex; gap:10px; align-items:center;
      z-index:5; user-select:none;
    }
    .brand .word{font-weight:600; font-size:28px; letter-spacing:.2px}
    .brand .dots{display:flex; gap:8px; align-items:center}
    .dot{width:12px; height:12px; border-radius:50%;}
    .dot.red{ background:#D23737; box-shadow:0 0 14px rgba(210,55,55,.65) }
    .dot.ghost{ background:var(--ghost) }
    main{
      height:100%; display:flex; align-items:center; justify-content:center; padding:20px;
    }
    .bubble{
      position:absolute; top:88px; left:28px;
      background:var(--bubble); color:var(--bubbleText);
      padding:12px 16px; border-radius:14px; box-shadow:var(--shadow);
      max-width:420px; font-weight:500;
    }
    .composer{
      position:absolute; left:50%; transform:translateX(-50%);
      bottom:120px; width:min(700px, 88vw);
      background:var(--input); border-radius:999px; padding:10px 14px;
      display:flex; align-items:center; gap:10px;
      border:1px solid rgba(255,255,255,.06);
      box-shadow:var(--shadow);
    }
    .composer input{
      flex:1; background:transparent; border:none; outline:none; color:var(--text);
      font:16px Inter, sans-serif;
    }
    .composer input::placeholder{ color:var(--hint) }
    .send{
      width:30px; height:30px; border-radius:50%; border:1px solid rgba(255,255,255,.08);
      display:grid; place-items:center; background:transparent; cursor:pointer;
    }
    .send svg{ width:16px; height:16px; fill:var(--arrow) }
    .send:disabled{ opacity:.5; cursor:not-allowed }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="brand">
      <div class="word">Ledger<span style="opacity:.9">.</span></div>
      <div class="dots">
        <div class="dot red"></div>
        <div class="dot ghost"></div>
      </div>
    </div>

    <main aria-label="Chat canvas">
      <div class="bubble" id="bubble">Hi! How can I help today?</div>

      <form class="composer" id="composer">
        <input id="q" type="text" placeholder="Ask anything â€¦" autocomplete="off" />
        <button class="send" id="send" type="submit" aria-label="Send">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M3.4 20.6 22 12 3.4 3.4 3 10l11 2-11 2z"/>
          </svg>
        </button>
      </form>
    </main>
  </div>

  <script>
    const API_BASE = ""; // set this later to your backend URL
    const CHAT_URL = API_BASE ? `${API_BASE}/chat` : null;

    const form = document.getElementById('composer');
    const q = document.getElementById('q');
    const bubble = document.getElementById('bubble');
    const sendBtn = document.getElementById('send');

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const text = q.value.trim();
      if (!text) return;
      q.value = ""; q.focus(); sendBtn.disabled = true;

      // Show user text immediately
      bubble.textContent = text;

      // Mock mode if API_BASE not set
      if (!CHAT_URL) {
        await new Promise(r => setTimeout(r, 600));
        bubble.textContent = "ðŸ”§ API not connected yet. This is a mock response.";
        sendBtn.disabled = false;
        return;
      }

      try{
        const r = await fetch(CHAT_URL, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ message: text })
        });
        const data = await r.json();
        const reply = data?.reply || 'â€¦';
        bubble.textContent = reply;
      }catch(err){
        bubble.textContent = "Oopsâ€”server error. Try again.";
      }finally{
        sendBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
