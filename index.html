<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ledger.</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0A0A0B;              /* a hair darker */
    --bubble:#C43B34;           /* brighter red */
    --bubbleText:#fff5f5;
    --input:#2F2E30;            /* a touch lighter than before */
    --inputBorder:rgba(255,255,255,.08);
    --hint:#9a9aa0;
    --ghost:#bdbdc1;
    --text:#F0F0F2;
    --arrow:#bfc0c6;
    --shadow-strong:0 16px 36px rgba(0,0,0,.55);
    --shadow-soft:0 10px 24px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font:16px/1.5 Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  }
  .wrap{height:100%;position:relative;overflow:hidden}

  /* header */
  .brand{
    position:fixed; inset:20px auto auto 22px;
    display:flex; gap:12px; align-items:center; z-index:5; user-select:none;
  }
  .brand .word{font-weight:700; font-size:32px; letter-spacing:.2px}
  .brand .dots{display:flex; gap:8px; align-items:center}
  .dot{border-radius:50%}
  .dot.red{ width:13px; height:13px; background:#DA3D37; box-shadow:0 0 16px rgba(218,61,55,.65) }
  .dot.ghost{ width:11px; height:11px; background:var(--ghost) }

  main{height:100%; display:flex; align-items:center; justify-content:center; padding:20px}

  /* red chat bubble â€“ closer to header, more pill-like */
  .bubble{
    position:absolute; top:84px; left:24px;
    background:var(--bubble); color:var(--bubbleText);
    padding:14px 18px; border-radius:22px; max-width:520px;
    font-weight:600; box-shadow:var(--shadow-soft);
  }

  /* input pill â€“ taller, softer, stronger shadow */
  .composer{
    position:absolute; left:50%; transform:translateX(-50%);
    bottom:72px; width:min(820px, 90vw);
    background:var(--input); border:1px solid var(--inputBorder);
    border-radius:999px; padding:14px 16px;
    display:flex; align-items:center; gap:12px;
    box-shadow:var(--shadow-strong);
  }
  .composer input{
    flex:1; background:transparent; border:none; outline:none; color:var(--text);
    font:16px Inter, sans-serif;
  }
  .composer input::placeholder{ color:var(--hint) }

  /* chevron-in-circle send */
  .send{
    width:36px; height:36px; border-radius:50%;
    border:1px solid rgba(255,255,255,.12);
    background:#3A3A3C; display:grid; place-items:center; cursor:pointer;
    box-shadow:0 6px 16px rgba(0,0,0,.35);
  }
  .send svg{ width:16px; height:16px; fill:var(--arrow) }
  .send:disabled{ opacity:.55; cursor:not-allowed }

  @media (max-width:640px){
    .brand{ inset:16px auto auto 16px }
    .brand .word{ font-size:28px }
    .bubble{ top:78px; left:16px; right:16px }
    .composer{ bottom:56px; width:92vw; padding:12px 14px }
    .send{ width:34px; height:34px }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="brand">
      <div class="word">Ledger<span style="opacity:.9">.</span></div>
      <div class="dots"><div class="dot red"></div><div class="dot ghost"></div></div>
    </div>

    <main aria-label="Chat canvas">
      <div class="bubble" id="bubble">Hi! How can I help today?</div>
      <form class="composer" id="composer">
        <input id="q" type="text" placeholder="Ask anything â€¦" autocomplete="off" />
        <button class="send" id="send" type="submit" aria-label="Send">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5l9 7-9 7V5z"/></svg>
        </button>
      </form>
    </main>
  </div>

<script>
  // Hook this up later
  const API_BASE = ""; 
  const CHAT_URL = API_BASE ? `${API_BASE}/chat` : null;

  const form = document.getElementById('composer');
  const q = document.getElementById('q');
  const bubble = document.getElementById('bubble');
  const sendBtn = document.getElementById('send');

  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const text = q.value.trim();
    if (!text) return;
    q.value = ""; q.focus(); sendBtn.disabled = true;
    bubble.textContent = text;

    if (!CHAT_URL){
      await new Promise(r=>setTimeout(r,600));
      bubble.textContent = "ðŸ”§ API not connected yet. This is a mock response.";
      sendBtn.disabled = false; return;
    }
    try{
      const r = await fetch(CHAT_URL, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ message: text })
      });
      const data = await r.json();
      bubble.textContent = data?.reply || 'â€¦';
    }catch{
      bubble.textContent = "Oopsâ€”server error. Try again.";
    }finally{
      sendBtn.disabled = false;
    }
  });
</script>
</body>
</html>
