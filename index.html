<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ledger.</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0b0c;
    --text:#e9eaec;
    --muted:#a6a6ac;
    --bubble:#a53731;      /* red bubble */
    --bubbleText:#fff3f3;
    --pill:#2b2a2b;
    --pillBorder:rgba(255,255,255,.06);
    --arrow:#c9cbd2;
    --shadow:0 8px 22px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font:15px/1.45 Inter, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  }
  .wrap{height:100%; position:relative; overflow:hidden}

  /* Header: "Ledger." + thin white line under it */
  .brand-wrap{ position:fixed; top:18px; left:18px; z-index:5; user-select:none }
  .brand{ font-weight:400; font-size:22px; letter-spacing:.1px }
  .brand-line{
    margin-top:4px; height:1px; width:42px;
    background:rgba(255,255,255,.6);
  }

  main{height:100%; display:flex; align-items:center; justify-content:center; padding:20px}

  /* Small red bubble near header */
  .bubble{
    position:absolute; top:74px; left:22px;
    background:var(--bubble); color:var(--bubbleText);
    padding:10px 14px; border-radius:14px; box-shadow:var(--shadow);
    max-width:420px; font-weight:400;
  }

  /* Slim input pill */
  .composer{
    position:absolute; left:50%; transform:translateX(-50%);
    bottom:86px; width:min(680px, 88vw);
    background:var(--pill); border:1px solid var(--pillBorder);
    border-radius:999px; padding:8px 12px; box-shadow:var(--shadow);
    display:flex; align-items:center; gap:10px;
  }
  .composer input{
    flex:1; background:transparent; border:none; outline:none; color:var(--text);
    font:15px Inter, sans-serif;
  }
  .composer input::placeholder{ color:var(--muted) }

  /* Arrow-in-circle (stroke), compact */
  .send{
    width:28px; height:28px; border-radius:50%;
    border:1px solid rgba(255,255,255,.10);
    background:#3a393a; display:grid; place-items:center; cursor:pointer;
  }
  .send svg{ width:14px; height:14px }
  .send path{ fill:none; stroke:var(--arrow); stroke-width:2; stroke-linecap:round; stroke-linejoin:round }
  .send:disabled{ opacity:.6; cursor:not-allowed }

  @media (max-width:640px){
    .brand-wrap{ top:14px; left:14px }
    .brand{ font-size:20px }
    .brand-line{ width:40px }
    .bubble{ top:66px; left:14px; right:14px }
    .composer{ bottom:64px; width:92vw }
  }
</style>
</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <div class="brand-wrap">
      <div class="brand">Ledger.</div>
      <div class="brand-line"></div>
    </div>

    <main aria-label="Chat canvas">
      <div class="bubble" id="bubble">Hi! How can I help today?</div>

      <form class="composer" id="composer">
        <input id="q" type="text" placeholder="Ask anything â€¦" autocomplete="off" />
        <button class="send" id="send" type="submit" aria-label="Send">
          <!-- upward arrow (not a play icon) -->
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 17 V7 M8.5 10.5 L12 7 L15.5 10.5" />
          </svg>
        </button>
      </form>
    </main>
  </div>

<script>
  /* Mock mode by default. Set API_BASE to your backend later. */
  const API_BASE = "";
  const CHAT_URL = API_BASE ? `${API_BASE}/chat` : null;

  const form = document.getElementById('composer');
  const q = document.getElementById('q');
  const bubble = document.getElementById('bubble');
  const sendBtn = document.getElementById('send');

  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const text = q.value.trim();
    if (!text) return;
    q.value = ""; q.focus(); sendBtn.disabled = true;
    bubble.textContent = text;

    if (!CHAT_URL){
      await new Promise(r=>setTimeout(r,600));
      bubble.textContent = "ðŸ”§ API not connected yet. This is a mock response.";
      sendBtn.disabled = false; return;
    }
    try{
      const r = await fetch(CHAT_URL, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ message: text })
      });
      const data = await r.json();
      bubble.textContent = data?.reply || 'â€¦';
    }catch{
      bubble.textContent = "Oopsâ€”server error. Try again.";
    }finally{
      sendBtn.disabled = false;
    }
  });
</script>
</body>
</html>
